{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2026-02-06 17:47:25.672989",
 "css": "/* =========================\r\n   Site Organogram Print CSS\r\n   - Forces A4 landscape per-print-format (not global)\r\n   - Overrides Frappe print width constraints\r\n   - Adds rounded \"card\" styling similar to UI\r\n   ========================= */\r\n\r\n@media print {\r\n  @page { size: A4 landscape; margin: 10mm; }\r\n}\r\n\r\n/* Kill Frappe's portrait max-width constraints */\r\n.print-format {\r\n  max-width: none !important;\r\n  width: 297mm !important;   /* A4 landscape width */\r\n  margin: 0 auto !important;\r\n  font-size: 10px;\r\n  line-height: 1.25;\r\n}\r\n\r\n.print-format .page-break,\r\n.print-format .page-break > div,\r\n.print-format .print-format-wrapper {\r\n  max-width: none !important;\r\n  width: auto !important;\r\n}\r\n\r\n/* Header */\r\n.so-pf-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 12px;\r\n  margin-bottom: 10px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.so-pf-title {\r\n  font-size: 16px;\r\n  font-weight: 800;\r\n  margin: 0;\r\n}\r\n\r\n.so-pf-meta {\r\n  font-size: 10px;\r\n  opacity: 0.9;\r\n}\r\n\r\n.so-pf-meta b {\r\n  font-weight: 700;\r\n}\r\n\r\n/* Group block */\r\n.so-pf-group {\r\n  margin: 0 0 12px 0;\r\n  break-inside: avoid;\r\n  page-break-inside: avoid;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 14px;\r\n  padding: 10px;\r\n}\r\n\r\n.so-pf-group-name {\r\n  font-size: 12px;\r\n  font-weight: 800;\r\n  margin: 0 0 8px 0;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n/* Badge for shift mode */\r\n.so-pf-badge {\r\n  display: inline-block;\r\n  padding: 2px 10px;\r\n  border: 1px solid #cbd5e1;\r\n  border-radius: 999px;\r\n  font-size: 9px;\r\n  white-space: nowrap;\r\n}\r\n\r\n/* Table layout */\r\n.so-pf-table {\r\n  width: 100%;\r\n  border-collapse: separate;\r\n  border-spacing: 0 8px;      /* spacing between rows to feel like cards */\r\n  table-layout: fixed;\r\n}\r\n\r\n.so-pf-table th,\r\n.so-pf-table td {\r\n  vertical-align: top;\r\n  padding: 0;\r\n}\r\n\r\n.so-pf-table thead th {\r\n  font-weight: 800;\r\n  color: #111827;\r\n  padding: 8px 10px;\r\n}\r\n\r\n.so-pf-table thead th:first-child {\r\n  border-top-left-radius: 12px;\r\n  border-bottom-left-radius: 12px;\r\n  background: #f8fafc;\r\n}\r\n\r\n.so-pf-table thead th:not(:first-child) {\r\n  background: #f8fafc;\r\n}\r\n\r\n.so-pf-table thead th:last-child {\r\n  border-top-right-radius: 12px;\r\n  border-bottom-right-radius: 12px;\r\n}\r\n\r\n/* Column widths */\r\n.so-pf-col-left { width: 22%; }\r\n.so-pf-col-shift { width: auto; }\r\n\r\n/* Left cell (asset/designation) */\r\n.so-pf-leftcell {\r\n  background: #f8fafc;\r\n  border-radius: 12px;\r\n  padding: 10px;\r\n  border: 1px solid #e5e7eb;\r\n  margin-right: 8px;\r\n}\r\n\r\n.so-pf-leftcell .so-pf-subtle {\r\n  margin-top: 2px;\r\n}\r\n\r\n/* Shift cell card */\r\n.so-pf-card {\r\n  border-radius: 12px;\r\n  padding: 10px;\r\n  border: 1px solid #cbd5e1;\r\n  min-height: 44px;\r\n}\r\n\r\n.so-pf-card.filled {\r\n  background: #eaf7ef;\r\n  border-color: #22c55e;\r\n}\r\n\r\n.so-pf-card.empty {\r\n  background: #ffecec;\r\n  border-color: #ef4444;\r\n  color: #6b7280;\r\n}\r\n\r\n/* Subtle secondary text */\r\n.so-pf-subtle {\r\n  color: #6b7280;\r\n}\r\n\r\n/* Empty message */\r\n.so-pf-emptyline {\r\n  color: #6b7280;\r\n  font-style: italic;\r\n  padding: 8px 10px;\r\n}\r\n\r\n/* Bottom lists */\r\n.so-pf-lists {\r\n  margin-top: 12px;\r\n  display: flex;\r\n  gap: 16px;\r\n}\r\n\r\n.so-pf-list {\r\n  width: 50%;\r\n  border: 1px solid #e5e7eb;\r\n  border-radius: 14px;\r\n  padding: 10px;\r\n  break-inside: avoid;\r\n  page-break-inside: avoid;\r\n}\r\n\r\n.so-pf-list h3 {\r\n  font-size: 12px;\r\n  font-weight: 800;\r\n  margin: 0 0 8px 0;\r\n}\r\n\r\n.so-pf-list ul { margin: 0; padding-left: 16px; }\r\n.so-pf-list li { margin: 0 0 4px 0; }\r\n",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Site Organogram",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>Site Organogram</div><br><small class=\\\"sub-heading\\\">{{ _(doc.name) }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"{% set shift_letters = [\\\"A\\\",\\\"B\\\",\\\"C\\\",\\\"D\\\",\\\"E\\\"] %}\\r\\n\\r\\n{% set n = (doc.shifts or 0) | int %}\\r\\n{% if n < 0 %}{% set n = 0 %}{% endif %}\\r\\n{% if n > 5 %}{% set n = 5 %}{% endif %}\\r\\n\\r\\n{% set active_shifts = [] %}\\r\\n{% for i in range(n) %}\\r\\n  {% set _ = active_shifts.append(\\\"Shift \\\" ~ shift_letters[i]) %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set emp_by_id = {} %}\\r\\n{% for e in (doc.employees or []) %}\\r\\n  {% if e.employee %}\\r\\n    {% set _ = emp_by_id.update({ e.employee: e }) %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set asset_by_id = {} %}\\r\\n{% for a in (doc.assets or []) %}\\r\\n  {% if a.asset %}\\r\\n    {% set _ = asset_by_id.update({ a.asset: a }) %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set assigned_employees = [] %}\\r\\n{% for m in (doc.shift_mappings or []) %}\\r\\n  {% if m.employee and (m.employee not in assigned_employees) %}\\r\\n    {% set _ = assigned_employees.append(m.employee) %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set unallocated_employees = [] %}\\r\\n{% for e in (doc.employees or []) %}\\r\\n  {% if e.employee and (e.employee not in assigned_employees) %}\\r\\n    {% set _ = unallocated_employees.append(e) %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set allocated_assets = [] %}\\r\\n{% for m in (doc.shift_mappings or []) %}\\r\\n  {% if m.asset and (m.asset not in allocated_assets) %}\\r\\n    {% set _ = allocated_assets.append(m.asset) %}\\r\\n  {% endif %}\\r\\n  {% if m.row_key and m.row_key.startswith(\\\"ASSET::\\\") %}\\r\\n    {% set a_id = m.row_key.replace(\\\"ASSET::\\\", \\\"\\\") %}\\r\\n    {% if a_id and (a_id not in allocated_assets) %}\\r\\n      {% set _ = allocated_assets.append(a_id) %}\\r\\n    {% endif %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n{% set unallocated_assets = [] %}\\r\\n{% for a in (doc.assets or []) %}\\r\\n  {% if a.asset and (a.asset not in allocated_assets) %}\\r\\n    {% set _ = unallocated_assets.append(a) %}\\r\\n  {% endif %}\\r\\n{% endfor %}\\r\\n\\r\\n<div class=\\\"so-pf-header\\\">\\r\\n  <div>\\r\\n    <div class=\\\"so-pf-title\\\">Site Organogram</div>\\r\\n    <div class=\\\"so-pf-meta\\\">\\r\\n      {% if doc.branch %}<div><b>Branch:</b> {{ doc.branch }}</div>{% endif %}\\r\\n      {% if doc.location %}<div><b>Location:</b> {{ doc.location }}</div>{% endif %}\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"so-pf-meta\\\" style=\\\"text-align:right;\\\">\\r\\n    <div><b>Document:</b> {{ doc.name }}</div>\\r\\n    <div><b>Printed:</b> {{ frappe.utils.now_datetime().strftime(\\\"%Y-%m-%d %H:%M\\\") }}</div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n{% for g in (doc.group_headings or []) %}\\r\\n  {% if not g.group %}{% continue %}{% endif %}\\r\\n\\r\\n  {% set mode = (g.shifts or \\\"\\\").strip() %}\\r\\n  {% if mode == \\\"Day Shift Only\\\" %}\\r\\n    {% set group_shifts = [\\\"Day Shift\\\"] %}\\r\\n  {% elif mode == \\\"Night Shift Only\\\" %}\\r\\n    {% set group_shifts = [\\\"Night Shift\\\"] %}\\r\\n  {% else %}\\r\\n    {% set group_shifts = active_shifts %}\\r\\n  {% endif %}\\r\\n\\r\\n  {% set row_keys = [] %}\\r\\n  {% for m in (doc.shift_mappings or []) %}\\r\\n    {% if (m.group or \\\"\\\") == g.group and m.row_key and (m.row_key not in row_keys) %}\\r\\n      {% set _ = row_keys.append(m.row_key) %}\\r\\n    {% endif %}\\r\\n  {% endfor %}\\r\\n\\r\\n  {% set asset_rows = [] %}\\r\\n  {% set desig_rows = [] %}\\r\\n  {% for rk in row_keys %}\\r\\n    {% if rk.startswith(\\\"ASSET::\\\") %}\\r\\n      {% set _ = asset_rows.append(rk) %}\\r\\n    {% else %}\\r\\n      {% set _ = desig_rows.append(rk) %}\\r\\n    {% endif %}\\r\\n  {% endfor %}\\r\\n\\r\\n  {% set asset_rows = asset_rows | sort %}\\r\\n  {% set desig_rows = desig_rows | sort %}\\r\\n  {% set ordered_rows = asset_rows + desig_rows %}\\r\\n\\r\\n  <div class=\\\"so-pf-card\\\">\\r\\n    <div class=\\\"so-pf-card-header\\\">\\r\\n      <div class=\\\"so-pf-group-name\\\">{{ g.group }}</div>\\r\\n      {% if g.shifts %}<span class=\\\"so-pf-badge\\\">{{ g.shifts }}</span>{% endif %}\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"so-pf-table-wrap\\\">\\r\\n      <table class=\\\"so-pf-table\\\">\\r\\n        <thead>\\r\\n          <tr>\\r\\n            <th class=\\\"so-pf-col-left\\\">Asset / Designation</th>\\r\\n            {% for s in group_shifts %}\\r\\n              <th>{{ s }}</th>\\r\\n            {% endfor %}\\r\\n          </tr>\\r\\n        </thead>\\r\\n\\r\\n        <tbody>\\r\\n          {% if not ordered_rows %}\\r\\n            <tr>\\r\\n              <td colspan=\\\"{{ 1 + (group_shifts | length) }}\\\" class=\\\"so-pf-empty\\\">No rows in this group.</td>\\r\\n            </tr>\\r\\n          {% else %}\\r\\n            {% for rk in ordered_rows %}\\r\\n              <tr>\\r\\n                <td>\\r\\n                  {% if rk.startswith(\\\"ASSET::\\\") %}\\r\\n                    {% set a_id = rk.replace(\\\"ASSET::\\\",\\\"\\\") %}\\r\\n                    {% set a = asset_by_id.get(a_id) %}\\r\\n                    {% if a %}\\r\\n                      <b>{{ a.asset }}</b>{% if a.item_name %} \\u2014 {{ a.item_name }}{% endif %}\\r\\n                      {% if a.asset_category %}<div class=\\\"so-pf-empty\\\">{{ a.asset_category }}</div>{% endif %}\\r\\n                    {% else %}\\r\\n                      <b>{{ a_id }}</b>\\r\\n                    {% endif %}\\r\\n                  {% elif rk.startswith(\\\"DESIG::\\\") %}\\r\\n                    {% set d = rk.replace(\\\"DESIG::\\\",\\\"\\\") %}\\r\\n                    <b>{{ d }}</b>\\r\\n                  {% else %}\\r\\n                    <b>{{ rk }}</b>\\r\\n                  {% endif %}\\r\\n                </td>\\r\\n\\r\\n                {% for s in group_shifts %}\\r\\n                  {% set cell_emp = None %}\\r\\n                  {% for m in (doc.shift_mappings or []) %}\\r\\n                    {% if (m.group or \\\"\\\") == g.group and (m.shift or \\\"\\\") == s and (m.row_key or \\\"\\\") == rk %}\\r\\n                      {% if m.employee %}\\r\\n                        {% set cell_emp = emp_by_id.get(m.employee) %}\\r\\n                      {% endif %}\\r\\n                      {% break %}\\r\\n                    {% endif %}\\r\\n                  {% endfor %}\\r\\n\\r\\n                  <td>\\r\\n                    {% if cell_emp %}\\r\\n                      <div class=\\\"so-pf-cell-card\\\">\\r\\n                        <b>{{ cell_emp.employee_name or cell_emp.employee }}</b>\\r\\n                        {% if cell_emp.employee %} ({{ cell_emp.employee }}){% endif %}\\r\\n                        {% if cell_emp.designation %}<div class=\\\"so-pf-empty\\\">{{ cell_emp.designation }}</div>{% endif %}\\r\\n                      </div>\\r\\n                    {% else %}\\r\\n                      <span class=\\\"so-pf-empty\\\">\\u2014</span>\\r\\n                    {% endif %}\\r\\n                  </td>\\r\\n                {% endfor %}\\r\\n              </tr>\\r\\n            {% endfor %}\\r\\n          {% endif %}\\r\\n        </tbody>\\r\\n      </table>\\r\\n    </div>\\r\\n  </div>\\r\\n{% endfor %}\\r\\n\\r\\n<div class=\\\"so-pf-lists\\\">\\r\\n  <div class=\\\"so-pf-list\\\">\\r\\n    <h3>Unallocated Employees</h3>\\r\\n    {% if unallocated_employees %}\\r\\n      <ul>\\r\\n        {% for e in unallocated_employees | sort(attribute=\\\"employee_name\\\") %}\\r\\n          <li>\\r\\n            <b>{{ e.employee_name or e.employee }}</b>{% if e.employee %} ({{ e.employee }}){% endif %}\\r\\n            {% if e.designation %} \\u2014 <span class=\\\"so-pf-empty\\\">{{ e.designation }}</span>{% endif %}\\r\\n          </li>\\r\\n        {% endfor %}\\r\\n      </ul>\\r\\n    {% else %}\\r\\n      <div class=\\\"so-pf-empty\\\">None</div>\\r\\n    {% endif %}\\r\\n  </div>\\r\\n\\r\\n  <div class=\\\"so-pf-list\\\">\\r\\n    <h3>Unallocated Assets</h3>\\r\\n    {% if unallocated_assets %}\\r\\n      <ul>\\r\\n        {% for a in unallocated_assets | sort(attribute=\\\"asset\\\") %}\\r\\n          <li>\\r\\n            <b>{{ a.asset }}</b>\\r\\n            {% if a.item_name %} \\u2014 <span class=\\\"so-pf-empty\\\">{{ a.item_name }}</span>{% endif %}\\r\\n            {% if a.asset_category %} \\u2014 <span class=\\\"so-pf-empty\\\">{{ a.asset_category }}</span>{% endif %}\\r\\n          </li>\\r\\n        {% endfor %}\\r\\n      </ul>\\r\\n    {% else %}\\r\\n      <div class=\\\"so-pf-empty\\\">None</div>\\r\\n    {% endif %}\\r\\n  </div>\\r\\n</div>\\r\\n\"}]",
 "html": "{# ============================================================\r\n   Site Organogram \u2013 Print Format (Frappe-safe Jinja)\r\n   FULL DROP-IN | NO break | NO continue\r\n   ============================================================ #}\r\n\r\n{# -------------------------\r\n   Shifts\r\n   ------------------------- #}\r\n{% set shift_letters = [\"A\",\"B\",\"C\",\"D\",\"E\"] %}\r\n{% set n = (doc.shifts or 0) | int %}\r\n{% if n < 0 %}{% set n = 0 %}{% endif %}\r\n{% if n > 5 %}{% set n = 5 %}{% endif %}\r\n\r\n{% set active_shifts = [] %}\r\n{% for i in range(n) %}\r\n  {% set _ = active_shifts.append(\"Shift \" ~ shift_letters[i]) %}\r\n{% endfor %}\r\n\r\n{# -------------------------\r\n   Lookups\r\n   ------------------------- #}\r\n{% set emp_by_id = {} %}\r\n{% for e in (doc.employees or []) %}\r\n  {% if e.employee %}\r\n    {% set _ = emp_by_id.update({ e.employee: e }) %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{% set asset_by_id = {} %}\r\n{% for a in (doc.assets or []) %}\r\n  {% if a.asset %}\r\n    {% set _ = asset_by_id.update({ a.asset: a }) %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{# -------------------------\r\n   Assigned / Unallocated\r\n   ------------------------- #}\r\n{% set assigned_employees = [] %}\r\n{% for m in (doc.shift_mappings or []) %}\r\n  {% if m.employee and m.employee not in assigned_employees %}\r\n    {% set _ = assigned_employees.append(m.employee) %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{% set unallocated_employees = [] %}\r\n{% for e in (doc.employees or []) %}\r\n  {% if e.employee and e.employee not in assigned_employees %}\r\n    {% set _ = unallocated_employees.append(e) %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{% set allocated_assets = [] %}\r\n{% for m in (doc.shift_mappings or []) %}\r\n  {% if m.asset and m.asset not in allocated_assets %}\r\n    {% set _ = allocated_assets.append(m.asset) %}\r\n  {% endif %}\r\n  {% if m.row_key and m.row_key.startswith(\"ASSET::\") %}\r\n    {% set aid = m.row_key.replace(\"ASSET::\",\"\") %}\r\n    {% if aid and aid not in allocated_assets %}\r\n      {% set _ = allocated_assets.append(aid) %}\r\n    {% endif %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{% set unallocated_assets = [] %}\r\n{% for a in (doc.assets or []) %}\r\n  {% if a.asset and a.asset not in allocated_assets %}\r\n    {% set _ = unallocated_assets.append(a) %}\r\n  {% endif %}\r\n{% endfor %}\r\n\r\n{# -------------------------\r\n   Header\r\n   ------------------------- #}\r\n<div class=\"so-pf-header\">\r\n  <div>\r\n    <div class=\"so-pf-title\">Site Organogram</div>\r\n    <div class=\"so-pf-meta\">\r\n      {% if doc.branch %}<div><b>Branch:</b> {{ doc.branch }}</div>{% endif %}\r\n      {% if doc.location %}<div><b>Location:</b> {{ doc.location }}</div>{% endif %}\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"so-pf-meta\" style=\"text-align:right;\">\r\n    <div><b>Document:</b> {{ doc.name }}</div>\r\n    <div><b>Printed:</b> {{ frappe.utils.now_datetime().strftime(\"%Y-%m-%d %H:%M\") }}</div>\r\n  </div>\r\n</div>\r\n\r\n{# ============================================================\r\n   GROUPS\r\n   ============================================================ #}\r\n\r\n{% for g in (doc.group_headings or []) %}\r\n{% if g.group %}\r\n\r\n  {% set mode = (g.shifts or \"\").strip() %}\r\n  {% if mode == \"Day Shift Only\" %}\r\n    {% set group_shifts = [\"Day Shift\"] %}\r\n  {% elif mode == \"Night Shift Only\" %}\r\n    {% set group_shifts = [\"Night Shift\"] %}\r\n  {% else %}\r\n    {% set group_shifts = active_shifts %}\r\n  {% endif %}\r\n\r\n  {% set row_keys = [] %}\r\n  {% for m in (doc.shift_mappings or []) %}\r\n    {% if m.group == g.group and m.row_key and m.row_key not in row_keys %}\r\n      {% set _ = row_keys.append(m.row_key) %}\r\n    {% endif %}\r\n  {% endfor %}\r\n\r\n  {% set asset_rows = [] %}\r\n  {% set desig_rows = [] %}\r\n  {% for rk in row_keys %}\r\n    {% if rk.startswith(\"ASSET::\") %}\r\n      {% set _ = asset_rows.append(rk) %}\r\n    {% else %}\r\n      {% set _ = desig_rows.append(rk) %}\r\n    {% endif %}\r\n  {% endfor %}\r\n\r\n  {% set ordered_rows = (asset_rows | sort) + (desig_rows | sort) %}\r\n\r\n  <div class=\"so-pf-group\">\r\n    <div class=\"so-pf-group-name\">\r\n      <span>{{ g.group }}</span>\r\n      {% if g.shifts %}<span class=\"so-pf-badge\">{{ g.shifts }}</span>{% endif %}\r\n    </div>\r\n\r\n    <table class=\"so-pf-table\">\r\n      <thead>\r\n        <tr>\r\n          <th class=\"so-pf-col-left\">Asset / Designation</th>\r\n          {% for s in group_shifts %}\r\n            <th>{{ s }}</th>\r\n          {% endfor %}\r\n        </tr>\r\n      </thead>\r\n\r\n      <tbody>\r\n      {% if not ordered_rows %}\r\n        <tr>\r\n          <td colspan=\"{{ 1 + group_shifts|length }}\">\r\n            <div class=\"so-pf-emptyline\">No rows in this group.</div>\r\n          </td>\r\n        </tr>\r\n      {% else %}\r\n\r\n        {% for rk in ordered_rows %}\r\n        <tr>\r\n          <td>\r\n            <div class=\"so-pf-leftcell\">\r\n              {% if rk.startswith(\"ASSET::\") %}\r\n                {% set aid = rk.replace(\"ASSET::\",\"\") %}\r\n                {% set a = asset_by_id.get(aid) %}\r\n                {% if a %}\r\n                  <b>{{ a.asset }}</b>{% if a.item_name %} \u2014 {{ a.item_name }}{% endif %}\r\n                  {% if a.asset_category %}<div class=\"so-pf-subtle\">{{ a.asset_category }}</div>{% endif %}\r\n                {% else %}\r\n                  <b>{{ aid }}</b>\r\n                {% endif %}\r\n              {% elif rk.startswith(\"DESIG::\") %}\r\n                {% set d = rk.replace(\"DESIG::\",\"\").split(\"::\")[0] %}\r\n                <b>{{ d }}</b>\r\n              {% else %}\r\n                <b>{{ rk }}</b>\r\n              {% endif %}\r\n            </div>\r\n          </td>\r\n\r\n          {% for s in group_shifts %}\r\n            {% set ns = namespace(emp=None, found=false) %}\r\n            {% for m in (doc.shift_mappings or []) %}\r\n              {% if not ns.found and m.group == g.group and m.shift == s and m.row_key == rk %}\r\n                {% if m.employee %}\r\n                  {% set ns.emp = emp_by_id.get(m.employee) %}\r\n                {% endif %}\r\n                {% set ns.found = true %}\r\n              {% endif %}\r\n            {% endfor %}\r\n\r\n            <td>\r\n              {% if ns.emp %}\r\n                <div class=\"so-pf-card filled\">\r\n                  <b>\r\n                    {{ ns.emp.employee_name or ns.emp.employee }}\r\n                    {% if ns.emp.employee %} ({{ ns.emp.employee }}){% endif %}\r\n                  </b>\r\n                  {% if ns.emp.designation %}\r\n                    <div class=\"so-pf-subtle\">{{ ns.emp.designation }}</div>\r\n                  {% endif %}\r\n                </div>\r\n              {% else %}\r\n                <div class=\"so-pf-card empty\">Vacant</div>\r\n              {% endif %}\r\n            </td>\r\n          {% endfor %}\r\n        </tr>\r\n        {% endfor %}\r\n\r\n      {% endif %}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n{% endif %}\r\n{% endfor %}\r\n\r\n{# ============================================================\r\n   Bottom Lists\r\n   ============================================================ #}\r\n\r\n<div class=\"so-pf-lists\">\r\n  <div class=\"so-pf-list\">\r\n    <h3>Unallocated Employees</h3>\r\n    {% if unallocated_employees %}\r\n      <ul>\r\n        {% for e in unallocated_employees | sort(attribute=\"employee_name\") %}\r\n          <li>\r\n            <b>{{ e.employee_name or e.employee }}</b>\r\n            {% if e.employee %} ({{ e.employee }}){% endif %}\r\n            {% if e.designation %} \u2014 <span class=\"so-pf-subtle\">{{ e.designation }}</span>{% endif %}\r\n          </li>\r\n        {% endfor %}\r\n      </ul>\r\n    {% else %}\r\n      <div class=\"so-pf-subtle\">None</div>\r\n    {% endif %}\r\n  </div>\r\n\r\n  <div class=\"so-pf-list\">\r\n    <h3>Unallocated Assets</h3>\r\n    {% if unallocated_assets %}\r\n      <ul>\r\n        {% for a in unallocated_assets | sort(attribute=\"asset\") %}\r\n          <li>\r\n            <b>{{ a.asset }}</b>\r\n            {% if a.item_name %} \u2014 <span class=\"so-pf-subtle\">{{ a.item_name }}</span>{% endif %}\r\n            {% if a.asset_category %} \u2014 <span class=\"so-pf-subtle\">{{ a.asset_category }}</span>{% endif %}\r\n          </li>\r\n        {% endfor %}\r\n      </ul>\r\n    {% else %}\r\n      <div class=\"so-pf-subtle\">None</div>\r\n    {% endif %}\r\n  </div>\r\n</div>\r\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2026-02-06 20:07:58.139084",
 "modified_by": "Administrator",
 "module": "Industrial Relations",
 "name": "Site Organogram",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "chrome",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}
